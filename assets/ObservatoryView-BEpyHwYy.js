import{i as Y,k as tr,u as rr,l as nr,r as T,s as Ve,m as tt,n as Be,o as we,p as Te,q as Z,j as a,t as Le,C as ce,v as $,d as le,A as bt,w as jt,x as ar,a as ge,b as ve,y as ir,z as sr,D as or,E as cr,F as lr,G as dr,I as J,R as g,J as wt,K as Ke,e as At,B as ee,L as Qe,c as oe,M as Me,N as Nt,O as kt,P as Ue,S as ur,Q as mr,U as Ot,V as Pt,W as Ae,X as hr,Y as fr,Z as Tt,_ as Ct,$ as St,a0 as _t,a1 as Et,a2 as pr,a3 as xr,a4 as gr,a5 as vr,a6 as yr,a7 as rt,a8 as nt}from"./index-DkVHath_.js";import{V as br,a as jr}from"./ViewLayout-ya6HA0TA.js";import{d as wr,f as Ar,a as $t,b as Nr}from"./formatters-D8DoMX06.js";import{Z as kr}from"./zap-s0Eq40AK.js";import{T as Rt}from"./trending-up-DQ6s5-C7.js";import{f as I,_ as Lt,a as Or,b as Mt,c as Pr,i as Q,T as Ye,p as U,L as q,g as It,d as Xe,e as Dt,D as Tr,C as Cr,h as xe,j as he,S as Sr,A as _r,k as Er,l as at,m as $r,n as V,o as Rr,u as Lr,G as Mr,q as Ce,r as Ir,s as zt,t as Dr,v as Oe,w as _e,x as zr,y as Fr,z as Br,B as Vr,E as Kr,F as Ft,H as Bt,I as Vt,J as Kt,K as Wr,M as Gr,R as Wt,N as Hr,X as Zr,Y as qr,O as Gt,P as Qr,Q as it}from"./AreaChart-B3H-ve17.js";import{A as We}from"./activity-BPTn9Mz4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=Y("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=Y("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Y("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=Y("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=Y("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Y("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=Y("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Y("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function ot(e,t){return tr(e,-1)}const nn=()=>{const e=rr(),{projects:t}=nr(),[n,r]=T.useState("active"),[i,s]=T.useState("age"),[o,u]=T.useState("desc"),[c,d]=T.useState(""),[l,y]=T.useState(new Set),m=T.useMemo(()=>new Map(t.map(f=>[f.id,f.name])),[t]),h=T.useMemo(()=>{const f=new Date;return e.tasks.map(x=>{const v=x.createdAt instanceof Date?x.createdAt:new Date(x.createdAt),_=wr(f,v),E=!x.isCompleted&&_>7;return{...x,age:_,ageLabel:Ar(v),isZombie:E,projectName:x.projectId?m.get(x.projectId):void 0}})},[e.tasks,m]),b=T.useMemo(()=>{const f=new Date,x=Ve(f,{weekStartsOn:1}),v=tt(f,{weekStartsOn:1}),_=Ve(ot(f),{weekStartsOn:1}),E=tt(ot(f),{weekStartsOn:1}),L=h.filter(O=>O.isZombie),k=h.filter(O=>O.isCompleted&&O.createdAt instanceof Date&&Be(O.createdAt,{start:x,end:v})).length,M=h.filter(O=>O.isCompleted&&O.createdAt instanceof Date&&Be(O.createdAt,{start:_,end:E})).length,C=M>0?Math.round((k-M)/M*100):k>0?100:0,G=h.filter(O=>O.isCompleted).reduce((O,re)=>O+re.estimatedTime,0),B=h.filter(O=>{const re=O.createdAt instanceof Date?O.createdAt:new Date(O.createdAt);return Be(re,{start:x,end:v})}).length,te=B>0?Math.round(k/B*100):k>0?100:0;return{zombieTasks:L,velocityThisWeek:k,velocityLastWeek:M,velocityChange:C,timeRecovered:G,createdThisWeek:B,completedThisWeek:k,healthRatio:te}},[h]),p=T.useMemo(()=>{const f=new Date,x=[];for(let k=34;k>=0;k--){const M=we(Te(f,k)),C=Z(M,"yyyy-MM-dd"),G=h.filter(B=>{const te=B.createdAt instanceof Date?B.createdAt:new Date(B.createdAt);return Z(we(te),"yyyy-MM-dd")===C}).length;x.push({date:C,count:G})}const v=[];for(let k=13;k>=0;k--){const M=we(Te(f,k)),C=Z(M,"yyyy-MM-dd"),G=Z(M,"dd/MM"),B=h.filter(O=>{if(!O.isCompleted)return!1;const re=O.createdAt instanceof Date?O.createdAt:new Date(O.createdAt);return Z(we(re),"yyyy-MM-dd")===C}).length,te=h.filter(O=>{const re=O.createdAt instanceof Date?O.createdAt:new Date(O.createdAt);return Z(we(re),"yyyy-MM-dd")===C}).length;v.push({date:C,label:G,completed:B,created:te})}const _=h.filter(k=>!k.isCompleted),L=["Obligation","Quotidien","Envie","Autres"].map(k=>{const M=_.filter(C=>C.category===k).length;return{category:k,count:M,percentage:_.length>0?Math.round(M/_.length*100):0}});return{creationHeatmap:x,completionTrend:v,categoryBreakdown:L}},[h]),j=T.useMemo(()=>{const x=Te(new Date,7);switch(n){case"active":return h.filter(v=>!v.isCompleted);case"completed":return h.filter(v=>v.isCompleted);case"zombie":return h.filter(v=>v.isZombie);case"recent":return h.filter(v=>(v.createdAt instanceof Date?v.createdAt:new Date(v.createdAt))>=x);default:return h}},[h,n]),N=T.useMemo(()=>{if(!c.trim())return j;const f=c.toLowerCase();return j.filter(x=>{var v;return x.name.toLowerCase().includes(f)||x.category.toLowerCase().includes(f)||((v=x.projectName)==null?void 0:v.toLowerCase().includes(f))})},[j,c]),w=T.useMemo(()=>[...N].sort((f,x)=>{let v=0;switch(i){case"name":v=f.name.localeCompare(x.name);break;case"category":v=f.category.localeCompare(x.category);break;case"context":v=f.context.localeCompare(x.context);break;case"age":v=f.age-x.age;break;case"estimatedTime":v=f.estimatedTime-x.estimatedTime;break;case"project":v=(f.projectName||"").localeCompare(x.projectName||"");break;case"status":v=(f.isCompleted?1:0)-(x.isCompleted?1:0);break;default:v=0}return o==="asc"?v:-v}),[N,i,o]),S=T.useMemo(()=>{const f=new Map;w.forEach(E=>{const L=E.projectId||"no-project";f.has(L)||f.set(L,[]),f.get(L).push(E)});const x=[],v=["Obligation","Quotidien","Envie","Autres"],_=Array.from(f.keys()).sort((E,L)=>{if(E==="no-project")return 1;if(L==="no-project")return-1;const k=m.get(E)||"",M=m.get(L)||"";return k.localeCompare(M)});for(const E of _){const L=f.get(E),k=E==="no-project"?"Sans projet":m.get(E)||"Projet inconnu",M=v.map(C=>{const G=L.filter(B=>B.category===C);return G.length===0?null:{id:`${E}-${C}`,name:C,tasks:G,totalTime:G.reduce((B,te)=>B+te.estimatedTime,0),completedCount:G.filter(B=>B.isCompleted).length}}).filter(C=>C!==null);x.push({id:E,name:k,tasks:L,totalTime:L.reduce((C,G)=>C+G.estimatedTime,0),completedCount:L.filter(C=>C.isCompleted).length,subGroups:M})}return x},[w,m]),A=T.useMemo(()=>h.slice(0,20).map(x=>({id:`activity-${x.id}`,type:x.isCompleted?"completed":"created",taskName:x.name,taskId:x.id,timestamp:x.createdAt instanceof Date?x.createdAt:new Date(x.createdAt)})).sort((x,v)=>v.timestamp.getTime()-x.timestamp.getTime()),[h]),z=T.useCallback(f=>{i===f?u(x=>x==="asc"?"desc":"asc"):(s(f),u("desc"))},[i]),F=T.useCallback(f=>{y(x=>{const v=new Set(x);return v.has(f)?v.delete(f):v.add(f),v})},[]),K=T.useCallback(()=>{y(new Set(w.map(f=>f.id)))},[w]),R=T.useCallback(()=>{y(new Set)},[]),W=T.useMemo(()=>({total:h.length,active:h.filter(f=>!f.isCompleted).length,completed:h.filter(f=>f.isCompleted).length,zombie:b.zombieTasks.length}),[h,b.zombieTasks]);return{data:{tasks:w,groupedTasks:S,insights:b,charts:p,recentActivity:A,stats:W},state:{loading:!1,isEmpty:h.length===0,activeTab:n,sortField:i,sortDirection:o,searchQuery:c,selectedTasks:l},actions:{setActiveTab:r,handleSort:z,setSearchQuery:d,toggleTaskSelection:F,selectAllTasks:K,clearSelection:R,toggleTaskCompletion:e.toggleTaskCompletion,removeTask:e.removeTask,restoreTask:e.restoreTask}}},Pe=({title:e,value:t,subtitle:n,trend:r,trendLabel:i,icon:s,variant:o,onClick:u,clickable:c=!1})=>{const d={danger:"border-destructive/30 bg-destructive/5",success:"border-green-500/30 bg-green-500/5",warning:"border-yellow-500/30 bg-yellow-500/5",info:"border-primary/30 bg-primary/5"},l={danger:"text-destructive",success:"text-green-500",warning:"text-yellow-500",info:"text-primary"},y=r===void 0?null:r>0?bt:r<0?jt:Jr,m=r===void 0?"":r>0?"text-green-500":r<0?"text-destructive":"text-muted-foreground";return a.jsx(ce,{className:$("transition-all duration-200",d[o],c&&"cursor-pointer hover:scale-[1.02] hover:shadow-md"),onClick:c?u:void 0,children:a.jsx(le,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:e}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:t}),n&&a.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:n}),r!==void 0&&a.jsxs("div",{className:$("flex items-center gap-1 mt-2",m),children:[y&&a.jsx(y,{className:"w-3 h-3"}),a.jsxs("span",{className:"text-xs font-medium",children:[r>0?"+":"",r,"%"]}),i&&a.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:i})]})]}),a.jsx("div",{className:$("p-2 rounded-lg",`${d[o]}`),children:a.jsx("div",{className:l[o],children:s})})]})})})},an=({insights:e,onFilterChange:t})=>a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Pe,{title:"Tâches zombies",value:e.zombieTasks.length,subtitle:e.zombieTasks.length>0?"Inactives > 7 jours":"Tout va bien !",icon:a.jsx(Je,{className:"w-5 h-5"}),variant:e.zombieTasks.length>5?"danger":e.zombieTasks.length>0?"warning":"success",onClick:()=>t("zombie"),clickable:e.zombieTasks.length>0}),a.jsx(Pe,{title:"Vélocité",value:e.velocityThisWeek,subtitle:"Complétées cette semaine",trend:e.velocityChange,trendLabel:"vs sem. dernière",icon:a.jsx(kr,{className:"w-5 h-5"}),variant:e.velocityChange>=0?"success":"warning"}),a.jsx(Pe,{title:"Temps récupéré",value:$t(e.timeRecovered),subtitle:"Total des tâches terminées",icon:a.jsx(Le,{className:"w-5 h-5"}),variant:"info"}),a.jsx(Pe,{title:"Ratio santé",value:`${e.healthRatio}%`,subtitle:`${e.completedThisWeek} complétées / ${e.createdThisWeek} créées`,icon:e.healthRatio>=100?a.jsx(Rt,{className:"w-5 h-5"}):a.jsx(rn,{className:"w-5 h-5"}),variant:e.healthRatio>=100?"success":e.healthRatio>=50?"warning":"danger"})]}),sn=({data:e})=>{const t=new Date,n=Ve(Te(t,28),{weekStartsOn:1}),r=[];for(let c=0;c<5;c++){const d=[];for(let l=0;l<7;l++)d.push(ar(n,c*7+l));r.push(d)}const i=c=>{const d=Z(c,"yyyy-MM-dd");return e.find(l=>l.date===d)},s=Math.max(...e.map(c=>c.count),1),o=c=>{if(c===0)return"bg-muted";const d=c/s;return d<.2?"bg-primary/20":d<.4?"bg-primary/40":d<.6?"bg-primary/60":d<.8?"bg-primary/80":"bg-primary"},u=["L","M","M","J","V","S","D"];return a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-2",children:a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(ir,{className:"w-4 h-4 text-primary"}),"Tâches créées (5 semaines)"]})}),a.jsx(le,{children:a.jsxs(sr,{children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("div",{className:"flex gap-1 mb-1",children:u.map((c,d)=>a.jsx("div",{className:"w-8 h-4 flex items-center justify-center text-xs text-muted-foreground",children:c},d))}),r.map((c,d)=>a.jsx("div",{className:"flex gap-1",children:c.map((l,y)=>{const m=i(l),h=Z(l,"yyyy-MM-dd")===Z(t,"yyyy-MM-dd"),b=l>t;return a.jsxs(or,{children:[a.jsx(cr,{asChild:!0,children:a.jsx("div",{className:`
                            w-8 h-8 rounded-md flex items-center justify-center text-xs
                            transition-all duration-200 cursor-default
                            ${b?"bg-muted/30 text-muted-foreground/50":o((m==null?void 0:m.count)||0)}
                            ${h?"ring-2 ring-primary ring-offset-1 ring-offset-background":""}
                            ${!b&&m&&m.count>0?"text-primary-foreground":""}
                          `,children:Z(l,"d")})}),a.jsxs(lr,{children:[a.jsx("p",{className:"font-medium",children:Z(l,"EEEE d MMMM",{locale:dr})}),!b&&a.jsxs("p",{className:"text-xs text-muted-foreground",children:[(m==null?void 0:m.count)||0," tâche",((m==null?void 0:m.count)||0)>1?"s":""," créée",((m==null?void 0:m.count)||0)>1?"s":""]})]})]},y)})},d))]}),a.jsxs("div",{className:"flex items-center gap-2 mt-4 justify-end",children:[a.jsx("span",{className:"text-xs text-muted-foreground",children:"Moins"}),a.jsx("div",{className:"w-4 h-4 rounded bg-muted"}),a.jsx("div",{className:"w-4 h-4 rounded bg-primary/20"}),a.jsx("div",{className:"w-4 h-4 rounded bg-primary/40"}),a.jsx("div",{className:"w-4 h-4 rounded bg-primary/60"}),a.jsx("div",{className:"w-4 h-4 rounded bg-primary/80"}),a.jsx("div",{className:"w-4 h-4 rounded bg-primary"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Plus"})]})]})})]})};var on=["points","className","baseLinePoints","connectNulls"];function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fe.apply(this,arguments)}function cn(e,t){if(e==null)return{};var n=ln(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ln(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ct(e){return hn(e)||mn(e)||un(e)||dn()}function dn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function un(e,t){if(e){if(typeof e=="string")return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}}function mn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hn(e){if(Array.isArray(e))return Ge(e)}function Ge(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(t){return t&&t.x===+t.x&&t.y===+t.y},fn=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){lt(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),lt(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Ne=function(t,n){var r=fn(t);n&&(r=[r.reduce(function(s,o){return[].concat(ct(s),ct(o))},[])]);var i=r.map(function(s){return s.reduce(function(o,u,c){return"".concat(o).concat(c===0?"M":"L").concat(u.x,",").concat(u.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},pn=function(t,n,r){var i=Ne(t,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Ne(n.reverse(),r).slice(1))},xn=function(t){var n=t.points,r=t.className,i=t.baseLinePoints,s=t.connectNulls,o=cn(t,on);if(!n||!n.length)return null;var u=J("recharts-polygon",r);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=pn(n,i,s);return g.createElement("g",{className:u},g.createElement("path",fe({},I(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?g.createElement("path",fe({},I(o,!0),{fill:"none",d:Ne(n,s)})):null,c?g.createElement("path",fe({},I(o,!0),{fill:"none",d:Ne(i,s)})):null)}var l=Ne(n,s);return g.createElement("path",fe({},I(o,!0),{fill:l.slice(-1)==="Z"?o.fill:"none",className:u,d:l}))},gn=Lt,vn=Or,yn=Mt;function bn(e,t){return e&&e.length?gn(e,yn(t),vn):void 0}var jn=bn;const wn=wt(jn);var An=Lt,Nn=Mt,kn=Pr;function On(e,t){return e&&e.length?An(e,Nn(t),kn):void 0}var Pn=On;const Tn=wt(Pn);var Cn=["cx","cy","angle","ticks","axisLine"],Sn=["ticks","tick","angle","tickFormatter","stroke"];function ye(e){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(e)}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(r){Ie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ut(e,t){if(e==null)return{};var n=_n(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _n(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zt(r.key),r)}}function $n(e,t,n){return t&&mt(e.prototype,t),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rn(e,t,n){return t=Ee(t),Ln(e,Ht()?Reflect.construct(t,n||[],Ee(e).constructor):t.apply(e,n))}function Ln(e,t){if(t&&(ye(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mn(e)}function Mn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ht=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ee(e)}function In(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},He(e,t)}function Ie(e,t,n){return t=Zt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e){var t=Dn(e,"string");return ye(t)=="symbol"?t:t+""}function Dn(e,t){if(ye(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ye(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var De=function(e){function t(){return En(this,t),Rn(this,t,arguments)}return In(t,e),$n(t,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,o=s.angle,u=s.cx,c=s.cy;return U(u,c,i,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,u=r.ticks,c=wn(u,function(l){return l.coordinate||0}),d=Tn(u,function(l){return l.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.angle,u=r.ticks,c=r.axisLine,d=ut(r,Cn),l=u.reduce(function(b,p){return[Math.min(b[0],p.coordinate),Math.max(b[1],p.coordinate)]},[1/0,-1/0]),y=U(i,s,l[0],o),m=U(i,s,l[1],o),h=ne(ne(ne({},I(d,!1)),{},{fill:"none"},I(c,!1)),{},{x1:y.x,y1:y.y,x2:m.x,y2:m.y});return g.createElement("line",ke({className:"recharts-polar-radius-axis-line"},h))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,u=i.angle,c=i.tickFormatter,d=i.stroke,l=ut(i,Sn),y=this.getTickTextAnchor(),m=I(l,!1),h=I(o,!1),b=s.map(function(p,j){var N=r.getTickValueCoord(p),w=ne(ne(ne(ne({textAnchor:y,transform:"rotate(".concat(90-u,", ").concat(N.x,", ").concat(N.y,")")},m),{},{stroke:"none",fill:d},h),{},{index:j},N),{},{payload:p});return g.createElement(q,ke({className:J("recharts-polar-radius-axis-tick",It(o)),key:"tick-".concat(p.coordinate)},Xe(r.props,p,j)),t.renderTickItem(o,w,c?c(p.value,j):p.value))});return g.createElement(q,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,o=r.tick;return!i||!i.length?null:g.createElement(q,{className:J("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),Dt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var o;return g.isValidElement(r)?o=g.cloneElement(r,i):Q(r)?o=r(i):o=g.createElement(Ye,ke({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(T.PureComponent);Ie(De,"displayName","PolarRadiusAxis");Ie(De,"axisType","radiusAxis");Ie(De,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function be(e){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},be(e)}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(r){ze(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qt(r.key),r)}}function Fn(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bn(e,t,n){return t=$e(t),Vn(e,qt()?Reflect.construct(t,n||[],$e(e).constructor):t.apply(e,n))}function Vn(e,t){if(t&&(be(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kn(e)}function Kn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qt=function(){return!!e})()}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$e(e)}function Wn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ze(e,t)}function ze(e,t,n){return t=Qt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qt(e){var t=Gn(e,"string");return be(t)=="symbol"?t:t+""}function Gn(e,t){if(be(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(be(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hn=Math.PI/180,pt=1e-5,Fe=function(e){function t(){return zn(this,t),Bn(this,t,arguments)}return Wn(t,e),Fn(t,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,o=i.cy,u=i.radius,c=i.orientation,d=i.tickSize,l=d||8,y=U(s,o,u,r.coordinate),m=U(s,o,u+(c==="inner"?-1:1)*l,r.coordinate);return{x1:y.x,y1:y.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*Hn),o;return s>pt?o=i==="outer"?"start":"end":s<-pt?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,o=r.radius,u=r.axisLine,c=r.axisLineType,d=ae(ae({},I(this.props,!1)),{},{fill:"none"},I(u,!1));if(c==="circle")return g.createElement(Tr,ie({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:s,r:o}));var l=this.props.ticks,y=l.map(function(m){return U(i,s,o,m.coordinate)});return g.createElement(xn,ie({className:"recharts-polar-angle-axis-line"},d,{points:y}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,o=i.tick,u=i.tickLine,c=i.tickFormatter,d=i.stroke,l=I(this.props,!1),y=I(o,!1),m=ae(ae({},l),{},{fill:"none"},I(u,!1)),h=s.map(function(b,p){var j=r.getTickLineCoord(b),N=r.getTickTextAnchor(b),w=ae(ae(ae({textAnchor:N},l),{},{stroke:"none",fill:d},y),{},{index:p,payload:b,x:j.x2,y:j.y2});return g.createElement(q,ie({className:J("recharts-polar-angle-axis-tick",It(o)),key:"tick-".concat(b.coordinate)},Xe(r.props,b,p)),u&&g.createElement("line",ie({className:"recharts-polar-angle-axis-tick-line"},m,j)),o&&t.renderTickItem(o,w,c?c(b.value,p):b.value))});return g.createElement(q,{className:"recharts-polar-angle-axis-ticks"},h)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,o=r.axisLine;return s<=0||!i||!i.length?null:g.createElement(q,{className:J("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var o;return g.isValidElement(r)?o=g.cloneElement(r,i):Q(r)?o=r(i):o=g.createElement(Ye,ie({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(T.PureComponent);ze(Fe,"displayName","PolarAngleAxis");ze(Fe,"axisType","angleAxis");ze(Fe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Se;function je(e){"@babel/helpers - typeof";return je=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(e)}function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(r){H(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function qn(e,t,n){return t&&gt(e.prototype,t),n&&gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qn(e,t,n){return t=Re(t),Un(e,Ut()?Reflect.construct(t,n||[],Re(e).constructor):t.apply(e,n))}function Un(e,t){if(t&&(je(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yn(e)}function Yn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ut(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ut=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Re(e)}function Xn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}function qe(e,t){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qe(e,t)}function H(e,t,n){return t=Yt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yt(e){var t=Jn(e,"string");return je(t)=="symbol"?t:t+""}function Jn(e,t){if(je(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(je(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var X=function(e){function t(n){var r;return Zn(this,t),r=Qn(this,t,[n]),H(r,"pieRef",null),H(r,"sectorRefs",[]),H(r,"id",Lr("recharts-pie-")),H(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Q(i)&&i()}),H(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Q(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Xn(t,e),qn(t,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,u=s.labelLine,c=s.dataKey,d=s.valueKey,l=I(this.props,!1),y=I(o,!1),m=I(u,!1),h=o&&o.offsetRadius||20,b=r.map(function(p,j){var N=(p.startAngle+p.endAngle)/2,w=U(p.cx,p.cy,p.outerRadius+h,N),S=P(P(P(P({},l),p),{},{stroke:"none"},y),{},{index:j,textAnchor:t.getTextAnchor(w.x,p.cx)},w),A=P(P(P(P({},l),p),{},{fill:"none",stroke:p.fill},m),{},{index:j,points:[U(p.cx,p.cy,p.outerRadius,N),w]}),z=c;return xe(c)&&xe(d)?z="value":xe(c)&&(z=d),g.createElement(q,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(j)},u&&t.renderLabelLineItem(u,A,"line"),t.renderLabelItem(o,S,he(p,z)))});return g.createElement(q,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,o=s.activeShape,u=s.blendStroke,c=s.inactiveShape;return r.map(function(d,l){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var y=i.isActiveIndex(l),m=c&&i.hasActiveIndex()?c:null,h=y?o:m,b=P(P({},d),{},{stroke:u?d.fill:d.stroke,tabIndex:-1});return g.createElement(q,pe({ref:function(j){j&&!i.sectorRefs.includes(j)&&i.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},Xe(i.props,d,l),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(l)}),g.createElement(Sr,pe({option:h,isActive:y,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,o=i.isAnimationActive,u=i.animationBegin,c=i.animationDuration,d=i.animationEasing,l=i.animationId,y=this.state,m=y.prevSectors,h=y.prevIsAnimationActive;return g.createElement(_r,{begin:u,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(l,"-").concat(h),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var p=b.t,j=[],N=s&&s[0],w=N.startAngle;return s.forEach(function(S,A){var z=m&&m[A],F=A>0?Er(S,"paddingAngle",0):0;if(z){var K=at(z.endAngle-z.startAngle,S.endAngle-S.startAngle),R=P(P({},S),{},{startAngle:w+F,endAngle:w+K(p)+F});j.push(R),w=R.endAngle}else{var W=S.endAngle,f=S.startAngle,x=at(0,W-f),v=x(p),_=P(P({},S),{},{startAngle:w+F,endAngle:w+v+F});j.push(_),w=_.endAngle}}),g.createElement(q,null,r.renderSectorsStatically(j))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var u=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[u].focus(),i.setState({sectorToFocus:u});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!$r(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,o=i.sectors,u=i.className,c=i.label,d=i.cx,l=i.cy,y=i.innerRadius,m=i.outerRadius,h=i.isAnimationActive,b=this.state.isAnimationFinished;if(s||!o||!o.length||!V(d)||!V(l)||!V(y)||!V(m))return null;var p=J("recharts-pie",u);return g.createElement(q,{tabIndex:this.props.rootTabIndex,className:p,ref:function(N){r.pieRef=N}},this.renderSectors(),c&&this.renderLabels(o),Dt.renderCallByParent(this.props,null,!1),(!h||b)&&Rr.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(g.isValidElement(r))return g.cloneElement(r,i);if(Q(r))return r(i);var o=J("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return g.createElement(Cr,pe({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,i,s){if(g.isValidElement(r))return g.cloneElement(r,i);var o=s;if(Q(r)&&(o=r(i),g.isValidElement(o)))return o;var u=J("recharts-pie-label-text",typeof r!="boolean"&&!Q(r)?r.className:"");return g.createElement(Ye,pe({},i,{alignmentBaseline:"middle",className:u}),o)}}])}(T.PureComponent);Se=X;H(X,"displayName","Pie");H(X,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Mr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});H(X,"parseDeltaAngle",function(e,t){var n=Ce(t-e),r=Math.min(Math.abs(t-e),360);return n*r});H(X,"getRealPieData",function(e){var t=e.data,n=e.children,r=I(e,!1),i=Ir(n,zt);return t&&t.length?t.map(function(s,o){return P(P(P({payload:s},r),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return P(P({},r),s.props)}):[]});H(X,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,i=t.width,s=t.height,o=Dr(i,s),u=r+Oe(e.cx,i,i/2),c=n+Oe(e.cy,s,s/2),d=Oe(e.innerRadius,o,0),l=Oe(e.outerRadius,o,o*.8),y=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:u,cy:c,innerRadius:d,outerRadius:l,maxRadius:y}});H(X,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?P(P({},t.type.defaultProps),t.props):t.props,i=Se.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,o=r.startAngle,u=r.endAngle,c=r.paddingAngle,d=r.dataKey,l=r.nameKey,y=r.valueKey,m=r.tooltipType,h=Math.abs(r.minAngle),b=Se.parseCoordinateOfPie(r,n),p=Se.parseDeltaAngle(o,u),j=Math.abs(p),N=d;xe(d)&&xe(y)?(_e(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N="value"):xe(d)&&(_e(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),N=y);var w=i.filter(function(R){return he(R,N,0)!==0}).length,S=(j>=360?w:w-1)*c,A=j-w*h-S,z=i.reduce(function(R,W){var f=he(W,N,0);return R+(V(f)?f:0)},0),F;if(z>0){var K;F=i.map(function(R,W){var f=he(R,N,0),x=he(R,l,W),v=(V(f)?f:0)/z,_;W?_=K.endAngle+Ce(p)*c*(f!==0?1:0):_=o;var E=_+Ce(p)*((f!==0?h:0)+v*A),L=(_+E)/2,k=(b.innerRadius+b.outerRadius)/2,M=[{name:x,value:f,payload:R,dataKey:N,type:m}],C=U(b.cx,b.cy,k,L);return K=P(P(P({percent:v,cornerRadius:s,name:x,tooltipPayload:M,midAngle:L,middleRadius:k,tooltipPosition:C},R),b),{},{value:he(R,N),startAngle:_,endAngle:E,payload:R,paddingAngle:Ce(p)*c}),K})}return P(P({},b),{},{sectors:F,data:i})});var ea=["x1","y1","x2","y2","key"],ta=["offset"];function de(e){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(e)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vt(Object(n),!0).forEach(function(r){ra(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ra(e,t,n){return t=na(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function na(e){var t=aa(e,"string");return de(t)=="symbol"?t:t+""}function aa(e,t){if(de(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(de(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}function yt(e,t){if(e==null)return{};var n=ia(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ia(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var sa=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,i=t.x,s=t.y,o=t.width,u=t.height,c=t.ry;return g.createElement("rect",{x:i,y:s,ry:c,width:o,height:u,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xt(e,t){var n;if(g.isValidElement(e))n=g.cloneElement(e,t);else if(Q(e))n=e(t);else{var r=t.x1,i=t.y1,s=t.x2,o=t.y2,u=t.key,c=yt(t,ea),d=I(c,!1);d.offset;var l=yt(d,ta);n=g.createElement("line",se({},l,{x1:r,y1:i,x2:s,y2:o,fill:"none",key:u}))}return n}function oa(e){var t=e.x,n=e.width,r=e.horizontal,i=r===void 0?!0:r,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(u,c){var d=D(D({},e),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(c),index:c});return Xt(i,d)});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function ca(e){var t=e.y,n=e.height,r=e.vertical,i=r===void 0?!0:r,s=e.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(u,c){var d=D(D({},e),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(c),index:c});return Xt(i,d)});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function la(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,s=e.width,o=e.height,u=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var l=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,h){return m-h});i!==l[0]&&l.unshift(0);var y=l.map(function(m,h){var b=!l[h+1],p=b?i+o-m:l[h+1]-m;if(p<=0)return null;var j=h%t.length;return g.createElement("rect",{key:"react-".concat(h),y:m,x:r,height:p,width:s,stroke:"none",fill:t[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},y)}function da(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,i=e.fillOpacity,s=e.x,o=e.y,u=e.width,c=e.height,d=e.verticalPoints;if(!n||!r||!r.length)return null;var l=d.map(function(m){return Math.round(m+s-s)}).sort(function(m,h){return m-h});s!==l[0]&&l.unshift(0);var y=l.map(function(m,h){var b=!l[h+1],p=b?s+u-m:l[h+1]-m;if(p<=0)return null;var j=h%r.length;return g.createElement("rect",{key:"react-".concat(h),x:m,y:o,width:p,height:c,stroke:"none",fill:r[j],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},y)}var ua=function(t,n){var r=t.xAxis,i=t.width,s=t.height,o=t.offset;return Ft(Bt(D(D(D({},Kt.defaultProps),r),{},{ticks:Vt(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,n)},ma=function(t,n){var r=t.yAxis,i=t.width,s=t.height,o=t.offset;return Ft(Bt(D(D(D({},Kt.defaultProps),r),{},{ticks:Vt(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,n)},ue={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Jt(e){var t,n,r,i,s,o,u=zr(),c=Fr(),d=Br(),l=D(D({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:ue.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:ue.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:ue.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:ue.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:ue.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:ue.verticalFill,x:V(e.x)?e.x:d.left,y:V(e.y)?e.y:d.top,width:V(e.width)?e.width:d.width,height:V(e.height)?e.height:d.height}),y=l.x,m=l.y,h=l.width,b=l.height,p=l.syncWithTicks,j=l.horizontalValues,N=l.verticalValues,w=Vr(),S=Kr();if(!V(h)||h<=0||!V(b)||b<=0||!V(y)||y!==+y||!V(m)||m!==+m)return null;var A=l.verticalCoordinatesGenerator||ua,z=l.horizontalCoordinatesGenerator||ma,F=l.horizontalPoints,K=l.verticalPoints;if((!F||!F.length)&&Q(z)){var R=j&&j.length,W=z({yAxis:S?D(D({},S),{},{ticks:R?j:S.ticks}):void 0,width:u,height:c,offset:d},R?!0:p);_e(Array.isArray(W),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(de(W),"]")),Array.isArray(W)&&(F=W)}if((!K||!K.length)&&Q(A)){var f=N&&N.length,x=A({xAxis:w?D(D({},w),{},{ticks:f?N:w.ticks}):void 0,width:u,height:c,offset:d},f?!0:p);_e(Array.isArray(x),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(de(x),"]")),Array.isArray(x)&&(K=x)}return g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(sa,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),g.createElement(oa,se({},l,{offset:d,horizontalPoints:F,xAxis:w,yAxis:S})),g.createElement(ca,se({},l,{offset:d,verticalPoints:K,xAxis:w,yAxis:S})),g.createElement(la,se({},l,{horizontalPoints:F})),g.createElement(da,se({},l,{verticalPoints:K})))}Jt.displayName="CartesianGrid";var ha=Wr({chartName:"PieChart",GraphicalChild:X,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Fe},{axisType:"radiusAxis",AxisComp:De}],formatAxisMap:Gr,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const fa=({data:e})=>a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-2",children:a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-green-500"}),"Tendance (14 jours)"]})}),a.jsx(le,{children:a.jsx("div",{className:"h-48",children:a.jsx(Wt,{width:"100%",height:"100%",children:a.jsxs(Hr,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorCompleted",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorCreated",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:.3}),a.jsx("stop",{offset:"95%",stopColor:"hsl(var(--muted-foreground))",stopOpacity:0})]})]}),a.jsx(Jt,{strokeDasharray:"3 3",className:"stroke-muted"}),a.jsx(Zr,{dataKey:"label",tick:{fontSize:10},tickLine:!1,axisLine:!1,className:"text-muted-foreground"}),a.jsx(qr,{tick:{fontSize:10},tickLine:!1,axisLine:!1,className:"text-muted-foreground",allowDecimals:!1}),a.jsx(Gt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"},labelStyle:{fontWeight:"bold",marginBottom:"4px"}}),a.jsx(Qr,{verticalAlign:"top",height:24,formatter:t=>a.jsx("span",{className:"text-xs text-muted-foreground",children:t==="completed"?"Complétées":"Créées"})}),a.jsx(it,{type:"monotone",dataKey:"created",stroke:"hsl(var(--muted-foreground))",strokeWidth:2,fillOpacity:1,fill:"url(#colorCreated)",name:"created"}),a.jsx(it,{type:"monotone",dataKey:"completed",stroke:"hsl(var(--primary))",strokeWidth:2,fillOpacity:1,fill:"url(#colorCompleted)",name:"completed"})]})})})})]}),pa={Obligation:"#ef4444",Quotidien:"#3b82f6",Envie:"#22c55e",Autres:"#a855f7"},xa=({data:e,totalActive:t})=>{const n=e.filter(i=>i.count>0).map(i=>({name:Ke[i.category],value:i.count,category:i.category,percentage:i.percentage})),r=i=>{try{const s=document.documentElement,o=getComputedStyle(s).getPropertyValue(`--category-${i.toLowerCase()}`);if(o)return`hsl(${o})`}catch{}return pa[i]};return a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-2",children:a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(Ur,{className:"w-4 h-4 text-primary"}),"Répartition par catégorie"]})}),a.jsxs(le,{children:[a.jsxs("div",{className:"h-48 relative",children:[n.length>0?a.jsx(Wt,{width:"100%",height:"100%",children:a.jsxs(ha,{children:[a.jsx(X,{data:n,cx:"50%",cy:"50%",innerRadius:45,outerRadius:70,paddingAngle:2,dataKey:"value",children:n.map((i,s)=>a.jsx(zt,{fill:r(i.category),stroke:"hsl(var(--background))",strokeWidth:2},`cell-${s}`))}),a.jsx(Gt,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px",fontSize:"12px"},formatter:(i,s,o)=>[`${i} tâche${i>1?"s":""} (${o.payload.percentage}%)`,s]})]})}):a.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground text-sm",children:"Aucune tâche active"}),n.length>0&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold",children:t}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"actives"})]})})]}),a.jsx("div",{className:"flex flex-wrap justify-center gap-3 mt-2",children:e.map(i=>a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r(i.category)}}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ke[i.category]," (",i.count,")"]})]},i.category))})]})]})},ga=e=>{switch(e){case"Obligation":return"bg-category-obligation/10 text-category-obligation border-category-obligation/30";case"Quotidien":return"bg-category-quotidien/10 text-category-quotidien border-category-quotidien/30";case"Envie":return"bg-category-envie/10 text-category-envie border-category-envie/30";default:return"bg-category-autres/10 text-category-autres border-category-autres/30"}},va=({task:e,isSelected:t,showRestore:n,onToggleSelection:r,onComplete:i,onDelete:s,onRestore:o})=>a.jsxs("div",{className:$("grid grid-cols-12 gap-2 px-3 py-2 items-center hover:bg-muted/50 transition-colors group",e.isZombie&&!e.isCompleted&&"bg-destructive/5",e.isCompleted&&"opacity-60"),children:[a.jsx("div",{className:"col-span-1",children:a.jsx(At,{checked:t,onCheckedChange:()=>r(e.id)})}),a.jsxs("div",{className:"col-span-3 flex items-center gap-2 min-w-0",children:[e.isZombie&&!e.isCompleted&&a.jsx(Je,{className:"w-3.5 h-3.5 text-destructive flex-shrink-0"}),a.jsx("span",{className:$("truncate text-sm",e.isCompleted&&"line-through text-muted-foreground"),children:e.name})]}),a.jsx("div",{className:"col-span-2 hidden sm:block",children:a.jsx(ee,{variant:"outline",className:$("text-[10px] px-1.5 py-0",ga(e.category)),children:Ke[e.category]})}),a.jsx("div",{className:"col-span-1 hidden md:block",children:a.jsx("span",{className:"text-xs",children:e.context==="Pro"?"💼":"🏠"})}),a.jsx("div",{className:"col-span-1",children:a.jsx("span",{className:$("text-xs",e.isZombie&&!e.isCompleted?"text-destructive font-medium":"text-muted-foreground"),children:e.ageLabel})}),a.jsx("div",{className:"col-span-1 hidden lg:block",children:a.jsx("span",{className:"text-xs text-muted-foreground",children:$t(e.estimatedTime)})}),a.jsx("div",{className:"col-span-2 hidden lg:block",children:e.projectName?a.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[a.jsx(Qe,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate",children:e.projectName})]}):a.jsx("span",{className:"text-xs text-muted-foreground/50",children:"—"})}),a.jsxs("div",{className:"col-span-1 flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n?a.jsx(oe,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>o(e.id),children:a.jsx(Me,{className:"w-3.5 h-3.5"})}):!e.isCompleted&&a.jsx(oe,{size:"icon",variant:"ghost",className:"h-6 w-6 text-green-600 hover:text-green-700",onClick:()=>i(e.id),children:a.jsx(Nt,{className:"w-3.5 h-3.5"})}),a.jsx(oe,{size:"icon",variant:"ghost",className:"h-6 w-6 text-destructive hover:text-destructive",onClick:()=>s(e.id),children:a.jsx(kt,{className:"w-3.5 h-3.5"})})]})]}),me=({field:e,currentField:t,direction:n,onSort:r,children:i,className:s})=>{const o=e===t;return a.jsxs("button",{onClick:()=>r(e),className:$("flex items-center gap-1 font-medium text-xs uppercase tracking-wide hover:text-foreground transition-colors",o?"text-foreground":"text-muted-foreground",s),children:[i,o?n==="asc"?a.jsx(bt,{className:"w-3 h-3"}):a.jsx(jt,{className:"w-3 h-3"}):a.jsx(hr,{className:"w-3 h-3 opacity-50"})]})},ya=({tasks:e,activeTab:t,sortField:n,sortDirection:r,searchQuery:i,selectedTasks:s,stats:o,onTabChange:u,onSort:c,onSearch:d,onToggleSelection:l,onSelectAll:y,onClearSelection:m,onComplete:h,onDelete:b,onRestore:p,hideTabBar:j=!1})=>{const N=s.size>0,w=e.length>0&&s.size===e.length,S=[{value:"active",label:"Actives",count:o.active,icon:Le},{value:"completed",label:"Terminées",count:o.completed,icon:Ue},{value:"zombie",label:"Zombies",count:o.zombie,icon:Je},{value:"recent",label:"Récentes",count:null,icon:en}];return a.jsxs(ce,{children:[a.jsxs(ge,{className:"pb-3",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(st,{className:"w-4 h-4 text-primary"}),"Toutes les tâches"]}),a.jsxs("div",{className:"relative w-full sm:w-64",children:[a.jsx(ur,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),a.jsx(mr,{placeholder:"Rechercher...",value:i,onChange:A=>d(A.target.value),className:"pl-8 h-8 text-sm"})]})]}),!j&&a.jsx(Ot,{value:t,onValueChange:A=>u(A),className:"mt-3",children:a.jsx(Pt,{className:"h-8",children:S.map(A=>a.jsxs(Ae,{value:A.value,className:"text-xs px-3 gap-1.5",children:[a.jsx(A.icon,{className:"w-3.5 h-3.5"}),A.label,A.count!==null&&a.jsx(ee,{variant:"secondary",className:"ml-1 h-4 px-1.5 text-[10px]",children:A.count})]},A.value))})}),N&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 p-2 bg-muted/50 rounded-lg",children:[a.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.size," sélectionnée",s.size>1?"s":""]}),a.jsx("div",{className:"flex-1"}),a.jsx(oe,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:m,children:"Désélectionner"}),t!=="completed"&&a.jsxs(oe,{size:"sm",variant:"ghost",className:"h-7 text-xs text-primary",onClick:()=>s.forEach(A=>h(A)),children:[a.jsx(Nt,{className:"w-3 h-3 mr-1"}),"Terminer"]}),t==="completed"&&a.jsxs(oe,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>s.forEach(A=>p(A)),children:[a.jsx(Me,{className:"w-3 h-3 mr-1"}),"Restaurer"]})]})]}),a.jsxs(le,{className:"pt-0",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 border-b bg-muted/30 rounded-t-lg",children:[a.jsx("div",{className:"col-span-1 flex items-center",children:a.jsx(At,{checked:w,onCheckedChange:()=>w?m():y()})}),a.jsx("div",{className:"col-span-3",children:a.jsx(me,{field:"name",currentField:n,direction:r,onSort:c,children:"Nom"})}),a.jsx("div",{className:"col-span-2 hidden sm:block",children:a.jsx(me,{field:"category",currentField:n,direction:r,onSort:c,children:"Catégorie"})}),a.jsx("div",{className:"col-span-1 hidden md:block",children:a.jsx(me,{field:"context",currentField:n,direction:r,onSort:c,children:"Ctx"})}),a.jsx("div",{className:"col-span-1",children:a.jsx(me,{field:"age",currentField:n,direction:r,onSort:c,children:"Âge"})}),a.jsx("div",{className:"col-span-1 hidden lg:block",children:a.jsx(me,{field:"estimatedTime",currentField:n,direction:r,onSort:c,children:"Durée"})}),a.jsx("div",{className:"col-span-2 hidden lg:block",children:a.jsx(me,{field:"project",currentField:n,direction:r,onSort:c,children:"Projet"})}),a.jsx("div",{className:"col-span-1 text-right text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Actions"})]}),a.jsx("div",{className:"divide-y max-h-[400px] overflow-y-auto",children:e.length===0?a.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[a.jsx(st,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Aucune tâche trouvée"})]}):e.map(A=>a.jsx(va,{task:A,isSelected:s.has(A.id),onToggleSelection:l,onComplete:h,onDelete:b,onRestore:p,showRestore:t==="completed"},A.id))}),a.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{children:[e.length," tâche",e.length>1?"s":""]}),a.jsxs("span",{children:["Total: ",o.total]})]})]})]})},ba=e=>{switch(e){case"created":return{icon:fr,color:"text-blue-500",bgColor:"bg-blue-500/10",label:"Créée"};case"completed":return{icon:Ue,color:"text-green-500",bgColor:"bg-green-500/10",label:"Terminée"};case"restored":return{icon:Me,color:"text-orange-500",bgColor:"bg-orange-500/10",label:"Restaurée"};default:return{icon:We,color:"text-muted-foreground",bgColor:"bg-muted",label:"Modifiée"}}},ja=({activities:e})=>e.length===0?a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-2",children:a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(We,{className:"w-4 h-4 text-primary"}),"Activité récente"]})}),a.jsx(le,{children:a.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[a.jsx(Le,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Aucune activité récente"})]})})]}):a.jsxs(ce,{children:[a.jsx(ge,{className:"pb-2",children:a.jsxs(ve,{className:"text-sm font-medium flex items-center gap-2",children:[a.jsx(We,{className:"w-4 h-4 text-primary"}),"Activité récente"]})}),a.jsxs(le,{children:[a.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:e.slice(0,15).map((t,n)=>{const r=ba(t.type),i=r.icon;return a.jsxs("div",{className:"flex items-start gap-3 group",children:[a.jsx("div",{className:$("flex-shrink-0 w-7 h-7 rounded-full flex items-center justify-center",r.bgColor),children:a.jsx(i,{className:$("w-3.5 h-3.5",r.color)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:$("text-xs font-medium",r.color),children:r.label}),a.jsx("span",{className:"text-xs text-muted-foreground",children:Nr(t.timestamp)})]}),a.jsx("p",{className:"text-sm truncate mt-0.5",children:t.taskName})]})]},t.id)})}),e.length>15&&a.jsx("div",{className:"mt-4 pt-3 border-t text-center",children:a.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",e.length-15," autres activités"]})})]})]}),et=e=>{if(e<60)return`${e}min`;const t=Math.floor(e/60),n=e%60;return n>0?`${t}h${n}`:`${t}h`},wa=e=>{const t={Obligation:"bg-destructive/10 text-destructive",Quotidien:"bg-primary/10 text-primary",Envie:"bg-accent/30 text-accent-foreground",Autres:"bg-muted text-muted-foreground"};return t[e]||t.Autres},Aa=e=>e==="Pro"?"bg-secondary text-secondary-foreground":"bg-accent/30 text-accent-foreground",er=({task:e,onComplete:t,onDelete:n,onRestore:r,onClick:i})=>a.jsxs("div",{className:$("group flex items-center gap-2 px-3 py-2 rounded-md transition-colors","hover:bg-accent/50 cursor-pointer",e.isCompleted&&"opacity-60"),onClick:()=>i==null?void 0:i(e),children:[a.jsx("button",{onClick:s=>{s.stopPropagation(),t(e.id)},className:"shrink-0 text-muted-foreground hover:text-primary transition-colors",children:e.isCompleted?a.jsx(Ue,{className:"w-4 h-4 text-primary"}):a.jsx(pr,{className:"w-4 h-4"})}),a.jsx("span",{className:$("flex-1 text-sm truncate",e.isCompleted&&"line-through text-muted-foreground"),children:e.name}),a.jsx("span",{className:"text-xs text-muted-foreground shrink-0",children:et(e.estimatedTime)}),a.jsx(ee,{variant:"secondary",className:$("text-[10px] px-1.5 py-0 h-5 shrink-0",wa(e.category)),children:e.category.slice(0,3)}),a.jsx(ee,{variant:"secondary",className:$("text-[10px] px-1.5 py-0 h-5 shrink-0",Aa(e.context)),children:e.context}),e.isZombie&&a.jsx(ee,{variant:"destructive",className:"text-[10px] px-1.5 py-0 h-5 shrink-0",children:e.ageLabel}),a.jsxs(xr,{children:[a.jsx(gr,{asChild:!0,onClick:s=>s.stopPropagation(),children:a.jsx(oe,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity shrink-0",children:a.jsx(vr,{className:"w-3 h-3"})})}),a.jsxs(yr,{align:"end",className:"w-36",children:[e.isCompleted&&r?a.jsxs(rt,{onClick:()=>r(e.id),children:[a.jsx(Me,{className:"w-3 h-3 mr-2"}),"Restaurer"]}):null,a.jsxs(rt,{onClick:()=>n(e.id),className:"text-destructive focus:text-destructive",children:[a.jsx(kt,{className:"w-3 h-3 mr-2"}),"Supprimer"]})]})]})]}),Na=({group:e,onComplete:t,onDelete:n,onRestore:r,onTaskClick:i})=>{const[s,o]=T.useState(!1);return a.jsxs(Tt,{open:s,onOpenChange:o,children:[a.jsx(Ct,{className:"w-full",children:a.jsxs("div",{className:$("flex items-center gap-2 px-2 py-1.5 rounded-md transition-colors","hover:bg-accent/30 text-sm"),children:[s?a.jsx(St,{className:"w-3 h-3 text-muted-foreground"}):a.jsx(_t,{className:"w-3 h-3 text-muted-foreground"}),a.jsx(tn,{className:"w-3 h-3 text-muted-foreground"}),a.jsx("span",{className:"font-medium text-foreground/80",children:e.name}),a.jsx(ee,{variant:"secondary",className:"text-[10px] px-1.5 py-0 h-4 ml-auto",children:e.tasks.length}),a.jsx("span",{className:"text-xs text-muted-foreground",children:et(e.totalTime)})]})}),a.jsx(Et,{children:a.jsx("div",{className:"ml-5 border-l border-border/50 pl-2 mt-1",children:e.tasks.map(u=>a.jsx(er,{task:u,onComplete:t,onDelete:n,onRestore:r,onClick:i},u.id))})})]})},ka=({group:e,onComplete:t,onDelete:n,onRestore:r,onTaskClick:i})=>{const[s,o]=T.useState(!0),u=e.subGroups&&e.subGroups.length>0;return a.jsx(Tt,{open:s,onOpenChange:o,children:a.jsxs("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[a.jsx(Ct,{className:"w-full",children:a.jsxs("div",{className:$("flex items-center gap-3 px-4 py-3 transition-colors","hover:bg-accent/20"),children:[s?a.jsx(St,{className:"w-4 h-4 text-muted-foreground"}):a.jsx(_t,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(Qe,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"font-semibold text-foreground",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[a.jsxs(ee,{variant:"outline",className:"text-xs",children:[e.tasks.length," tâches"]}),e.completedCount>0&&a.jsxs(ee,{variant:"secondary",className:"text-xs bg-primary/10 text-primary",children:[e.completedCount," terminées"]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Le,{className:"w-3 h-3"}),et(e.totalTime)]})]})]})}),a.jsx(Et,{children:a.jsx("div",{className:"px-2 pb-3 space-y-1",children:u?e.subGroups.map(c=>a.jsx(Na,{group:c,onComplete:t,onDelete:n,onRestore:r,onTaskClick:i},c.id)):e.tasks.map(c=>a.jsx(er,{task:c,onComplete:t,onDelete:n,onRestore:r,onClick:i},c.id))})})]})})},Oa=({groups:e,onComplete:t,onDelete:n,onRestore:r,onTaskClick:i})=>e.length===0?a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx(Qe,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),a.jsx("p",{children:"Aucune tâche à afficher"})]}):a.jsx("div",{className:"space-y-3",children:e.map(s=>a.jsx(ka,{group:s,onComplete:t,onDelete:n,onRestore:r,onTaskClick:i},s.id))}),Ra=()=>{const{data:e,state:t,actions:n}=nn(),[r,i]=T.useState("folders"),s=t.isEmpty?"empty":"success";return a.jsx(br,{state:s,emptyProps:{icon:a.jsx(nt,{className:"w-12 h-12"}),title:"Bienvenue dans l'Observatoire",description:"Créez votre première tâche pour commencer à suivre votre productivité"},header:{title:"Observatoire des Tâches",subtitle:"Analysez vos patterns de productivité",icon:a.jsx(nt,{className:"w-5 h-5"})},children:a.jsxs(jr,{className:"space-y-6",children:[a.jsx("section",{children:a.jsx(an,{insights:e.insights,onFilterChange:n.setActiveTab})}),a.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsx(sn,{data:e.charts.creationHeatmap}),a.jsx(fa,{data:e.charts.completionTrend}),a.jsx(xa,{data:e.charts.categoryBreakdown,totalActive:e.stats.active})]}),a.jsxs("section",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"xl:col-span-2 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx(Ot,{value:t.activeTab,onValueChange:o=>n.setActiveTab(o),className:"w-auto",children:a.jsxs(Pt,{className:"h-9",children:[a.jsxs(Ae,{value:"active",className:"text-xs px-3",children:["Actives (",e.stats.active,")"]}),a.jsxs(Ae,{value:"completed",className:"text-xs px-3",children:["Terminées (",e.stats.completed,")"]}),a.jsxs(Ae,{value:"zombie",className:"text-xs px-3",children:["Zombies (",e.stats.zombie,")"]}),a.jsx(Ae,{value:"recent",className:"text-xs px-3",children:"Récentes"})]})}),a.jsxs("div",{className:"flex items-center gap-1 bg-muted rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("folders"),className:$("p-1.5 rounded-md transition-colors",r==="folders"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),title:"Vue dossiers",children:a.jsx(Yr,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>i("table"),className:$("p-1.5 rounded-md transition-colors",r==="table"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),title:"Vue tableau",children:a.jsx(Xr,{className:"w-4 h-4"})})]})]}),r==="folders"?a.jsx(Oa,{groups:e.groupedTasks,onComplete:n.toggleTaskCompletion,onDelete:n.removeTask,onRestore:n.restoreTask}):a.jsx(ya,{tasks:e.tasks,activeTab:t.activeTab,sortField:t.sortField,sortDirection:t.sortDirection,searchQuery:t.searchQuery,selectedTasks:t.selectedTasks,stats:e.stats,onTabChange:n.setActiveTab,onSort:n.handleSort,onSearch:n.setSearchQuery,onToggleSelection:n.toggleTaskSelection,onSelectAll:n.selectAllTasks,onClearSelection:n.clearSelection,onComplete:n.toggleTaskCompletion,onDelete:n.removeTask,onRestore:n.restoreTask,hideTabBar:!0})]}),a.jsx("div",{children:a.jsx(ja,{activities:e.recentActivity})})]})]})})};export{Ra as default};
