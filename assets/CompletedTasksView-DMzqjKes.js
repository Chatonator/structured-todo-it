import{c as b,u as V,r as d,j as e,l as D,m as M,I as A,n as f,o as g,p as k,q as T,s as C,A as B,f as p,t as E}from"./index-OkmmFMeI.js";import{V as I}from"./ViewLayout-Bnv45DD-.js";import{V as q}from"./ViewStats-BcyeRM-K.js";import{T as z}from"./TaskCard-CWj4oMcv.js";import{f as N}from"./formatters-BjN0d5cq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=b("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=b("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),R=()=>{const n=V(),[l,c]=d.useState("date"),s=d.useMemo(()=>n.tasks.filter(a=>a.isCompleted),[n.tasks]),i=d.useMemo(()=>[...s].sort((a,o)=>{switch(l){case"date":return new Date(o.createdAt).getTime()-new Date(a.createdAt).getTime();case"duration":return o.estimatedTime-a.estimatedTime;case"name":return a.name.localeCompare(o.name);default:return 0}}),[s,l]),m=d.useMemo(()=>{const a=s.reduce((x,h)=>x+h.estimatedTime,0),o=s.length>0?Math.round(a/s.length):0;return{totalCount:s.length,totalTime:a,averageTime:o}},[s]),r=d.useCallback(a=>{c(a)},[]);return{data:{completedTasks:i,stats:m},state:{loading:!1,isEmpty:s.length===0,sortBy:l},actions:{restoreTask:n.restoreTask,removeTask:n.removeTask,setSortBy:r}}},F=({searchEnabled:n=!1,searchValue:l="",searchPlaceholder:c="Rechercher...",onSearchChange:s,filters:i=[],sortEnabled:m=!1,sortValue:r,sortOptions:a=[],onSortChange:o,actions:x,className:h,compact:S=!1})=>{const y=n&&s,j=i.length>0,v=m&&a.length>0&&o,w=!!x;return!y&&!j&&!v&&!w?null:e.jsxs("div",{className:D("flex flex-col sm:flex-row items-start sm:items-center gap-3",S?"py-2":"py-4",h),children:[e.jsxs("div",{className:"flex flex-1 flex-wrap items-center gap-2 w-full sm:w-auto",children:[y&&e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{type:"text",placeholder:c,value:l,onChange:t=>s(t.target.value),className:"pl-9 h-9"})]}),j&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4 text-muted-foreground hidden sm:block"}),i.map(t=>e.jsxs(f,{value:t.value,onValueChange:t.onChange,children:[e.jsx(g,{className:"h-9 min-w-[120px] max-w-[180px]",children:e.jsx(k,{placeholder:t.label})}),e.jsx(T,{children:t.options.map(u=>e.jsx(C,{value:u.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[u.icon,u.label]})},u.value))})]},t.id))]}),v&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground hidden sm:block"}),e.jsxs(f,{value:r,onValueChange:o,children:[e.jsx(g,{className:"h-9 min-w-[120px] max-w-[160px]",children:e.jsx(k,{placeholder:"Trier par"})}),e.jsx(T,{children:a.map(t=>e.jsx(C,{value:t.value,children:t.label},t.value))})]})]})]}),w&&e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0 w-full sm:w-auto justify-end",children:x})]})},P=({className:n})=>{const{data:l,state:c,actions:s}=R(),i=[{id:"total",label:"Tâches terminées",value:l.stats.totalCount,icon:e.jsx(p,{className:"w-4 h-4"})},{id:"time",label:"Temps total",value:N(l.stats.totalTime),icon:e.jsx(E,{className:"w-4 h-4"})},{id:"avg",label:"Temps moyen",value:N(l.stats.averageTime),icon:e.jsx(H,{className:"w-4 h-4"})}],m=[{value:"date",label:"Date"},{value:"duration",label:"Durée"},{value:"name",label:"Nom"}];return e.jsx(I,{header:{title:"Tâches terminées",subtitle:"Historique de vos accomplissements",icon:e.jsx(p,{className:"w-5 h-5"})},className:n,children:e.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[e.jsx(q,{stats:i,columns:3}),e.jsx(F,{sortOptions:m,sortValue:c.sortBy,onSortChange:r=>s.setSortBy(r)}),c.isEmpty?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-4 opacity-40"}),e.jsx("p",{children:"Aucune tâche terminée"})]}):e.jsx("div",{className:"space-y-2",children:l.completedTasks.map(r=>e.jsx(z,{task:r,totalTime:r.estimatedTime,variant:"compact",showCategory:!0,showDuration:!0},r.id))})]})})};export{P as default};
