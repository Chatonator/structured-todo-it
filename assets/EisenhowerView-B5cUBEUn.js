import{u as f,r as c,j as t,al as p,t as h,O as x,C as w,v as g,a as N,b as T,B as C,d as v,bh as y}from"./index-DkVHath_.js";import{V as A}from"./ViewLayout-ya6HA0TA.js";import{V as k}from"./ViewStats-DttAbdqo.js";import{a as m}from"./formatters-D8DoMX06.js";import{T as E}from"./TaskCard-DIGq32yU.js";import{Z as b}from"./zap-s0Eq40AK.js";import"./styling-Ga5ccOhh.js";const j={"urgent-important":{title:"Urgent & Important",description:"À faire immédiatement",color:"bg-system-error/10",borderColor:"border-system-error"},"not-urgent-important":{title:"Important",description:"À planifier",color:"bg-system-warning/10",borderColor:"border-system-warning"},"urgent-not-important":{title:"Urgent",description:"À déléguer",color:"bg-system-info/10",borderColor:"border-system-info"},"not-urgent-not-important":{title:"Ni urgent ni important",description:"À éliminer",color:"bg-muted",borderColor:"border-muted"}},O={Obligation:"urgent-important",Quotidien:"not-urgent-important",Envie:"urgent-not-important",Autres:"not-urgent-not-important"};function I(s){return O[s.category]??"not-urgent-not-important"}const D=()=>{const s=f(),e=c.useMemo(()=>s.tasks.filter(r=>!r.isCompleted&&!r.parentId),[s.tasks]),n=c.useMemo(()=>{const r={"urgent-important":[],"not-urgent-important":[],"urgent-not-important":[],"not-urgent-not-important":[]};return e.forEach(a=>{const o=I(a);r[o].push(a)}),r},[e]),d=c.useMemo(()=>{const r={"urgent-important":0,"not-urgent-important":0,"urgent-not-important":0,"not-urgent-not-important":0};return Object.entries(n).forEach(([a,o])=>{r[a]=o.reduce((l,i)=>l+i.estimatedTime,0)}),r},[n]),u=c.useMemo(()=>({totalTasks:e.length,urgentImportant:n["urgent-important"].length,important:n["not-urgent-important"].length,urgent:n["urgent-not-important"].length,neither:n["not-urgent-not-important"].length}),[e,n]);return{data:{quadrants:n,quadrantTimes:d,activeTasks:e,stats:u,configs:j},state:{loading:!1,isEmpty:e.length===0},actions:{toggleTaskCompletion:s.toggleTaskCompletion,updateTask:s.updateTask}}},U={"urgent-important":t.jsx(p,{className:"w-4 h-4"}),"not-urgent-important":t.jsx(h,{className:"w-4 h-4"}),"urgent-not-important":t.jsx(b,{className:"w-4 h-4"}),"not-urgent-not-important":t.jsx(x,{className:"w-4 h-4"})},R={"urgent-important":{bg:"bg-system-error",border:"border-system-error"},"not-urgent-important":{bg:"bg-system-warning",border:"border-system-warning"},"urgent-not-important":{bg:"bg-system-info",border:"border-system-info"},"not-urgent-not-important":{bg:"bg-muted-foreground",border:"border-muted"}},B=({className:s})=>{const{data:e,actions:n}=D(),d=[{id:"urgent-important",label:"Urgent & Important",value:e.stats.urgentImportant,icon:t.jsx(p,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["urgent-important"])},{id:"important",label:"Important",value:e.stats.important,icon:t.jsx(h,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["not-urgent-important"])},{id:"urgent",label:"Urgent",value:e.stats.urgent,icon:t.jsx(b,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["urgent-not-important"])},{id:"neither",label:"Ni l'un ni l'autre",value:e.stats.neither,icon:t.jsx(x,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["not-urgent-not-important"])}],u=["urgent-important","not-urgent-important","urgent-not-important","not-urgent-not-important"];return t.jsx(A,{header:{title:"Matrice Eisenhower",subtitle:"Priorisez par importance et urgence",icon:t.jsx(y,{className:"w-5 h-5"})},className:s,children:t.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[t.jsx(k,{stats:d,columns:4}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(r=>{const a=j[r],o=e.quadrants[r],l=R[r];return t.jsxs(w,{className:g("border-2",l.border),children:[t.jsx(N,{className:g("py-3 rounded-t-lg text-white",l.bg),children:t.jsxs(T,{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[U[r],t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-white",children:a.title}),t.jsx("div",{className:"text-xs font-normal opacity-80 text-white",children:a.description})]})]}),t.jsx(C,{variant:"outline",className:"text-xs bg-white/20 text-white border-white/30",children:o.length})]})}),t.jsxs(v,{className:"p-4",children:[o.length===0?t.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"Aucune tâche"}):t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:o.map(i=>t.jsx(E,{task:i,totalTime:i.estimatedTime,variant:"minimal",onClick:()=>n.toggleTaskCompletion(i.id)},i.id))}),o.length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground flex justify-between",children:[t.jsxs("span",{children:[o.length," tâche",o.length>1?"s":""]}),t.jsx("span",{children:m(e.quadrantTimes[r])})]})]})]},r)})})]})})};export{B as default};
