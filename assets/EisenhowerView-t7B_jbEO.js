import{c as f,u as w,r as c,j as t,aM as p,t as h,W as x,C as N,l as g,a as T,b as C,B as v,e as y,aN as A}from"./index-OkmmFMeI.js";import{V as k}from"./ViewLayout-Bnv45DD-.js";import{V as E}from"./ViewStats-BcyeRM-K.js";import{T as I}from"./TaskCard-CWj4oMcv.js";import{f as m}from"./formatters-BjN0d5cq.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=f("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),j={"urgent-important":{title:"Urgent & Important",description:"À faire immédiatement",color:"bg-system-error/10",borderColor:"border-system-error"},"not-urgent-important":{title:"Important",description:"À planifier",color:"bg-system-warning/10",borderColor:"border-system-warning"},"urgent-not-important":{title:"Urgent",description:"À déléguer",color:"bg-system-info/10",borderColor:"border-system-info"},"not-urgent-not-important":{title:"Ni urgent ni important",description:"À éliminer",color:"bg-muted",borderColor:"border-muted"}},O={Obligation:"urgent-important",Quotidien:"not-urgent-important",Envie:"urgent-not-important",Autres:"not-urgent-not-important"};function D(s){return O[s.category]??"not-urgent-not-important"}const U=()=>{const s=w(),e=c.useMemo(()=>s.tasks.filter(n=>!n.isCompleted&&!n.parentId),[s.tasks]),r=c.useMemo(()=>{const n={"urgent-important":[],"not-urgent-important":[],"urgent-not-important":[],"not-urgent-not-important":[]};return e.forEach(a=>{const o=D(a);n[o].push(a)}),n},[e]),d=c.useMemo(()=>{const n={"urgent-important":0,"not-urgent-important":0,"urgent-not-important":0,"not-urgent-not-important":0};return Object.entries(r).forEach(([a,o])=>{n[a]=o.reduce((l,i)=>l+i.estimatedTime,0)}),n},[r]),u=c.useMemo(()=>({totalTasks:e.length,urgentImportant:r["urgent-important"].length,important:r["not-urgent-important"].length,urgent:r["urgent-not-important"].length,neither:r["not-urgent-not-important"].length}),[e,r]);return{data:{quadrants:r,quadrantTimes:d,activeTasks:e,stats:u,configs:j},state:{loading:!1,isEmpty:e.length===0},actions:{toggleTaskCompletion:s.toggleTaskCompletion,updateTask:s.updateTask}}},M={"urgent-important":t.jsx(p,{className:"w-4 h-4"}),"not-urgent-important":t.jsx(h,{className:"w-4 h-4"}),"urgent-not-important":t.jsx(b,{className:"w-4 h-4"}),"not-urgent-not-important":t.jsx(x,{className:"w-4 h-4"})},R={"urgent-important":{bg:"bg-system-error",border:"border-system-error"},"not-urgent-important":{bg:"bg-system-warning",border:"border-system-warning"},"urgent-not-important":{bg:"bg-system-info",border:"border-system-info"},"not-urgent-not-important":{bg:"bg-muted-foreground",border:"border-muted"}},G=({className:s})=>{const{data:e,actions:r}=U(),d=[{id:"urgent-important",label:"Urgent & Important",value:e.stats.urgentImportant,icon:t.jsx(p,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["urgent-important"])},{id:"important",label:"Important",value:e.stats.important,icon:t.jsx(h,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["not-urgent-important"])},{id:"urgent",label:"Urgent",value:e.stats.urgent,icon:t.jsx(b,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["urgent-not-important"])},{id:"neither",label:"Ni l'un ni l'autre",value:e.stats.neither,icon:t.jsx(x,{className:"w-4 h-4"}),subtitle:m(e.quadrantTimes["not-urgent-not-important"])}],u=["urgent-important","not-urgent-important","urgent-not-important","not-urgent-not-important"];return t.jsx(k,{header:{title:"Matrice Eisenhower",subtitle:"Priorisez par importance et urgence",icon:t.jsx(A,{className:"w-5 h-5"})},className:s,children:t.jsxs("div",{className:"space-y-6 pb-20 md:pb-6",children:[t.jsx(E,{stats:d,columns:4}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(n=>{const a=j[n],o=e.quadrants[n],l=R[n];return t.jsxs(N,{className:g("border-2",l.border),children:[t.jsx(T,{className:g("py-3 rounded-t-lg text-white",l.bg),children:t.jsxs(C,{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[M[n],t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-white",children:a.title}),t.jsx("div",{className:"text-xs font-normal opacity-80 text-white",children:a.description})]})]}),t.jsx(v,{variant:"outline",className:"text-xs bg-white/20 text-white border-white/30",children:o.length})]})}),t.jsxs(y,{className:"p-4",children:[o.length===0?t.jsx("div",{className:"text-center py-4 text-muted-foreground text-sm",children:"Aucune tâche"}):t.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:o.map(i=>t.jsx(I,{task:i,totalTime:i.estimatedTime,variant:"minimal",onClick:()=>r.toggleTaskCompletion(i.id)},i.id))}),o.length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground flex justify-between",children:[t.jsxs("span",{children:[o.length," tâche",o.length>1?"s":""]}),t.jsx("span",{children:m(e.quadrantTimes[n])})]})]})]},n)})})]})})};export{G as default};
